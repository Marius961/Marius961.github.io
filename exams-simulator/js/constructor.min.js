$("body").prepend("<canvas id='canv' style='position: fixed;z-index: 99999; pointer-events: none'></canvas>");let c=$("#canv")[0],renderer=c.getContext("2d"),w=c.width=window.innerWidth,h=c.height=window.innerHeight;function startSnowFall(){snowFallStop=!1,Snowy(),renderer.clearRect(0,0,w,h)}function stopSnowFall(){snowFallStop=!0,arr=[],renderer.clearRect(0,0,w,h)}let snow,arr=[],freezeSnow=!1,snowFallStop=!1;function Snowy(){let n=1,e=50;for(let n=0;n<100;++n)(snow=new t).y=Math.random()*(h+50),snow.x=Math.random()*w,snow.t=Math.random()*(2*Math.PI),snow.sz=100/(10+100*Math.random())*1.2,snow.sp=.15*Math.pow(.8*snow.sz,2)*.9,snow.sp=snow.sp<1?1:snow.sp,arr.push(snow);function t(){this.draw=function(){this.g=renderer.createRadialGradient(this.x,this.y,0,this.x,this.y,this.sz),this.g.addColorStop(0,"hsla(255,255%,255%,1)"),this.g.addColorStop(1,"hsla(255,255%,255%,0)"),renderer.moveTo(this.x,this.y),renderer.fillStyle=this.g,renderer.beginPath(),renderer.arc(this.x,this.y,this.sz,0,2*Math.PI,!0),renderer.fill()}}!function t(){let o;if(snowFallStop)arr=[];else if(window.requestAnimationFrame(t),!freezeSnow){renderer.clearRect(0,0,w,h),renderer.fill();for(let t=0;t<arr.length;++t)(o=arr[t]).t+=.05,o.t=o.t>=2*Math.PI?0:o.t,o.y+=o.sp,o.x+=Math.sin(o.t*n)*(.3*o.sz),o.y>h+50&&(o.y=-10-Math.random()*e),o.x>w+e&&(o.x=-e),o.x<-e&&(o.x=w+e),o.draw()}}(),$(window).on("touchstart",function(){freezeSnow=!0}),$(window).on("touchend",function(){freezeSnow=!1}),$(window).blur(function(){freezeSnow=!0}),$(window).focus(function(){freezeSnow=!1})}window.addEventListener("resize",function(){snowFallStop||(c.style.width=window.innerWidth+"px",setTimeout(function(){c.style.height=window.innerHeight+"px"},0))},!1);